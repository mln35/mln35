json_data = `{
    "trainings": [
        {
            "grade": "Master",
            "domaine": "Informatique",
            "specialite": "Gestion de Données et Ingénierie Logicielle (GDIL)",
            "etablissement": {
                "nom":"Université Gaston Berger (UGB)",
                "ville":"Saint Louis"
            },
            "annee": "2020",
            "mention":"BIEN"
        },
        {
            "grade": "LICENCE",
            "domaine": "Informatique",
            "specialite": "Gestion de Données et Ingénierie Logicielle (GDIL)",
            "etablissement": {
                "nom":"Université Gaston Berger (UGB)",
                "ville":"Saint Louis"
            },
            "annee": "2016",
            "mention":"ASSEZ BIEN"
        },
        {
            "grade": "BACCALAUREAT",
            "domaine": "S1",
            "specialite": "Mathématiques et Sciences Physiques",
            "etablissement": {
                "nom":"Lycée Taïba-ICS",
                "ville":"Mboro"
            },
            "annee": "2012",
            "mention":""
        }
        
    ],
    "skills": [
        {
            "nom": "Langages",
            "level": "",
            "subskills": [
                {
                    "nom": "PYTHON",
                    "level": ""
                },
                {
                    "nom": "JAVA",
                    "level": ""
                },
                {
                    "nom": "C++",
                    "level": ""
                },
                
                {
                    "nom": "C",
                    "level": ""
                },
                {
                    "nom": "C#",
                    "level": ""
                },
                {
                    "nom": "JavaScript",
                    "level": ""
                }
               
            ]
        },
        {
            "nom": "Web front-end",
            "level": "",
            "subskills": [
                {
                    "nom": "HTML",
                    "level": ""
                },
                {
                    "nom": "CSS",
                    "level": ""
                },
                
                {
                    "nom": "Angular",
                    "level": ""
                },
                {
                    "nom": "Symfony",
                    "level": ""
                }
               
            ]
        },
        {
            "nom": "Web back-end",
            "level": "",
            "subskills": [
                {
                    "nom": "NodeJS",
                    "level": ""
                },
                {
                    "nom": "Express",
                    "level": ""
                },
                {
                    "nom": "JEE",
                    "level": ""
                },
                {
                    "nom": ".NET",
                    "level": ""
                },
                {
                    "nom": "PHP",
                    "level": ""
                },
                {
                    "nom": "SpringBoot",
                    "level": ""
                },
                {
                    "nom": "Rest APIs",
                    "level": ""
                }
            ]
        },
        {
            "nom": "Mobile",
            "level": "",
            "subskills": [
                {
                    "nom": "Android",
                    "level": ""
                },
                {
                    "nom": "Flutter",
                    "level": ""
                }               
            ]
        },
        {
            "nom": "Administration Base de Données",
            "level": "",
            "subskills": [
                {
                    "nom": "MySQL",
                    "level": ""
                },
                {
                    "nom": "PostgreSQL",
                    "level": ""
                },
                {
                    "nom": "Oracle",
                    "level": ""
                },
                {
                    "nom": "PL_SQL",
                    "level": ""
                },
                {
                    "nom": "MongoDB",
                    "level": ""
                },
                {
                    "nom": "Firebase",
                    "level": ""
                }

            ]
        },
        {
            "nom": "Administration Système",
            "level": "",
            "subskills": [
                {
                    "nom": "Windows",
                    "level": ""
                },
                {
                    "nom": "Linux",
                    "level": ""
                },
                {
                    "nom": "MacOS",
                    "level": ""
                }
            ]
        },
        {
            "nom": "Intelligence Artificielle",
            "level": "",
            "subskills": [
                {
                    "nom": "Réseaux Neuronaux",
                    "level": ""
                },
                {
                    "nom": "Machine Learning",
                    "level": ""
                },
                {
                    "nom": "Deep Learning",
                    "level": ""
                }
            ]
        },
        {
            "nom": "Analyse de données",
            "level": "",
            "subskills": [
                {
                    "nom": "Big Data (Hadoop)",
                    "level": ""
                },
                {
                    "nom": "Data-Mining(Weka)",
                    "level": ""
                },
                {
                    "nom": "Talend",
                    "level": ""
                }
            ]
        },
        
        {
            "nom": "Domaines de recherche",
            "level": "",
            "subskills": [
                {
                    "nom": "IoT",
                    "level": ""
                },
                {
                    "nom": "Complex Event Processing",
                    "level": ""
                },
                {
                    "nom": "Stream Reasoning",
                    "level": ""
                }
            ]
        },
        {
            "nom": "Centres d'intérêt",
            "level": "",
            "subskills": [
                {
                    "nom": "IA",
                    "level": ""
                },{
                    "nom": "Systèmes embarqués",
                    "level": ""
                },
                {
                    "nom": "Smart Home",
                    "level": ""
                },
                {
                    "nom": "Open Source",
                    "level": ""
                },
                {
                    "nom": "Hacking",
                    "level": ""
                }
            ]
        }
    ],
    "experience": [
        {
            "type": "Stage",
            "poste": "Analyste Programmeur",
            "sujet": "Conception et développement de services digitaux d'aide à l'agriculture",
            "etablissement": {
                "nom":"Multiservices Agricoles (MSA)",
                "sigle": "MSA",
                "ville":"Rosso"
            },
            "annee": "2020-2021"
        },
        {
            "type": "Stage",
            "poste": "Développeur, Concepteur",
            "sujet": "Développement d’un réseau de capteurs-intelligents pour le contrôle et la gestion de la qualité de l’épuration des eaux usées domestiques",
            "etablissement": {
                "departement":"Laboratoire d’Informatique, Image et Interaction (L3I)",
                "nom":"Université La Rochelle, France",
                "sigle": "",
                "ville":"La Rochelle",
                "pays":"France"
            },
            "annee": "2019-2020"
        },
        {
            "type": "Stage",
            "poste": "Développeur Informatique",
            "sujet": "Développement d’une application pour la gestion des dossiers de l’entreprise",
            "etablissement": {
                "nom":"CCBM Industries - Espace Auto",
                "sigle": "CCBM",
                "ville":"Dakar"
            },
            "annee": "2015"
        }
    ],
    "languages":[
        {
            "language":"Wolof",
            "level":"Maternelle"
        },
        {
            "language":"Francais",
            "level":"Professionelle"
        },
        {
            "language":"Anglais",
            "level":"Bon niveau"
        }
    ],
    "contact":[
        {
            "tel":
            {
                "mobile":"+221 77 206 01 01",
                "work": "+221 76 586 10 86"
            },
            "email":"ndiaye.mouhamet-latyr@ugb.edu.sn",
            "adresse":"Fogny, Tivaouane"

        }
    ]
}
`;


render = (element, txt) => {
    let spec = document.createElement(element);
    spec.innerHTML = txt;
    return spec;
}

let data = JSON.parse(json_data);
///////////////////////////////////////////////////
let skills_dom = document.querySelector('.comp');
for (skill of data.skills){
    if(skill){
        let skilldiv = document.createElement('div');
        skilldiv.classList.add('skilldiv');
        let skilltitle = document.createElement('ul');
        skilltitle.innerHTML = '<h5>'+skill.nom+'</h5>';
        skilldiv.appendChild(skilltitle);
        if(skill.subskills){
            for (subskill of skill.subskills){
                if (subskill){
                    let subskilldiv = document.createElement('li');
                    subskilldiv.classList.add('subskilldiv');
                    subskilldiv.innerHTML = subskill.nom;
                    skilltitle.appendChild(subskilldiv);
                }
            }
        }
        skills_dom.appendChild(skilldiv);
    }
}

///////////////////////////////////////////////////
let training_dom = document.querySelector('.trainings');
for (training of data.trainings){
    if(training){
        let t_div = document.createElement('div');
        t_div.classList.add('trainingdiv');
        if(training.mention)
            t_domain = render('ul',`<h5>${training.annee}: ${training.grade} ${training.domaine} (Mention ${training.mention})</h5>`);
        else
            t_domain = render('ul',`<h5>${training.annee}: ${training.grade} ${training.domaine}</h5>`);

        t_spec = render('li',training.specialite);

        t_school = render('li',training.etablissement.nom + ' de '+training.etablissement.ville);

        t_domain.appendChild(t_spec);

        t_domain.appendChild(t_school);

        t_div.appendChild(t_domain);

        training_dom.appendChild(t_div);
    }
}

///////////////////////////////////////////////////
let exp_dom = document.querySelector('.exp');
for (exp of data.experience){
    if(exp){
        let e_div = document.createElement('div');
        e_div.classList.add('expdiv');
        // t_school = render('li',`${training.etablissement.departement} de l'${training.etablissement.nom} de ${training.etablissement.ville}`);

        if(exp.etablissement.departement)
            e_type = render('ul',`<h5>${exp.annee} ${exp.type} : ${exp.poste}</h5> <h6>${exp.etablissement.departement} de l'${exp.etablissement.nom} </h6>`);
        else
            e_type = render('ul',`<h5>${exp.annee} ${exp.type} : ${exp.poste}</h5> <h6>${exp.etablissement.nom} </h6>`);

        // e_host = render('li',exp.etablissement.nom + ' ('+exp.etablissement.sigle+')');

        // e_poste = render('li',exp.poste);

        e_sujet = render('li',`<em>${exp.sujet}</em>`);

        // e_annee = render('li',exp.annee);

        // e_type.appendChild(e_host);

        // e_type.appendChild(e_poste);

        e_type.appendChild(e_sujet);

        // e_type.appendChild(e_annee);

        e_div.appendChild(e_type);
        

        
        exp_dom.appendChild(e_div);
    }
}

///////////////////////////////////////////////////
let lang_dom = document.querySelector('.lang');
let l_div = document.createElement('div');
l_div.classList.add('langdiv');
language = render('ul',"");
for (lang of data.languages){
    if(lang){
        
        l = render('li',lang.language);

        language.appendChild(l);

        l_div.appendChild(language);
        
    }
    lang_dom.appendChild(l_div);
}


///////////////////////////////////////////////////
let cont_dom = document.querySelector('.contact');
let c_div = document.createElement('div');
c_div.classList.add('contactdiv');
contact = render('ul',"");
for (cont of data.contact){
    if(cont){
        
        tel = render('li',`<i class="bi-phone-fill"></i>  <a href="tel:${cont.tel.mobile}">${cont.tel.mobile}</a> / <a href="tel:${cont.tel.work}">${cont.tel.work}</a>`);

        mail = render('li',`<i class="bi-envelope-fill"></i> <a href="mailto:${cont.email}">${cont.email}</a>`);

        ad = render('li','<i class="bi-geo-alt-fill"></i>' + cont.adresse);

        contact.appendChild(tel);

        contact.appendChild(mail);

        contact.appendChild(ad);

        c_div.appendChild(contact);
        
    }
    cont_dom.appendChild(c_div);
}

//TODO
/*
projects
link to skills
galerie
certificates
*/


// function myFunction(x) {
//     if (x.matches) { // If media query matches
//       document.body.style.backgroundColor = "yellow";
//     } else {
//       document.body.style.backgroundColor = "pink";
//     }
//   }
  
//   var x = window.matchMedia("@ media ")
//   myFunction(x) // Call listener function at run time
//   x.addEventListener('change',myFunction) // Attach listener function on state changes

print = function(){
    window.print();
}